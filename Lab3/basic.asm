        LIST p=18F4520
        #include <p18f4520.inc>
        CONFIG OSC = INTIO67
        CONFIG WDT = OFF
        ORG 0x00

	HIGH2 EQU 0x20
	LOW2 EQU 0x21
	B1 EQU 0x22
	B2 EQU 0x23
	TEMP1 EQU 0x24
	TEMP2 EQU 0x25
	TEMP3 EQU 0x26
	TEMP4 EQU 0x27
	
	;4-4??
	;2-2??
	;1-1??
	;??
        MOVLW   0xA6 ;01011011      
        MOVWF   TRISA

        ; Step 1: 高位 nibble
        SWAPF TRISA ;10110101
	
	;STEP2 ????????? 00110011 -> 11001100
	;????? b7b6 b3b2
	MOVF    TRISA, W ;W=10 11 01 01
	ANDLW  0xCC;11001100 ;W=10 00 01 00
	RRCF WREG,W ;???? ???
	RRCF WREG,W
	MOVWF  HIGH2
	
	;????? b5b4 b1b0
	MOVF    TRISA, W;W=10 11 01 01
	ANDLW   0x33;00110011 ;W=00 11 00 01
	RLCF WREG,W ;???? ???
	RLCF WREG,W
	MOVWF LOW2
	
	;??
	MOVF HIGH2,W
	IORWF LOW2,W
	MOVWF TRISA ;11100101
	
	;STEP3 ???bit
	;b7b6??
	MOVF TRISA,W
	ANDLW 0x80;10000000 ;W=10000000
	RRCF WREG,W
	MOVWF B1
	MOVF TRISA,W
	ANDLW 0x40;01000000 ;W=01000000
	RLCF WREG,W
	MOVWF B2
	;??
	MOVF B1,W
	IORWF B2,W
	MOVWF TEMP1 ;11000000
	
	;b5b4??
	MOVF TRISA,W
	ANDLW 0x20;00100000 ;W=00100000
	RRCF WREG,W
	MOVWF B1
	MOVF TRISA,W
	ANDLW 0x10;00010000 ;W=00000000
	RLCF WREG,W
	MOVWF B2
	;??
	MOVF B1,W
	IORWF B2,W
	MOVWF TEMP2 ;00010000
	;TEMP1?TEMP2??
	MOVF TEMP1,W
	IORWF TEMP2,W
	MOVWF TEMP3 ;11010000
	
	;b3b2??
	MOVF TRISA,W
	ANDLW 0x08;00001000 ;W=00000000
	RRCF WREG,W
	MOVWF B1
	MOVF TRISA,W
	ANDLW 0x04;00000100 ;W=00000100
	RLCF WREG,W
	MOVWF B2
	;??
	MOVF B1,W
	IORWF B2,W
	MOVWF TEMP1 ;00001000
	
	;b1b0??
	MOVF TRISA,W
	ANDLW 0x02;00000010 ;W=00000000
	RRCF WREG,W
	MOVWF B1
	MOVF TRISA,W
	ANDLW 0x01;00000001 ;W=00000001
	RLCF WREG,W
	MOVWF B2
	;??
	MOVF B1,W
	IORWF B2,W
	MOVWF TEMP2 ;00000010
	;TEMP1?TEMP2??
	MOVF TEMP1,W
	IORWF TEMP2,W
	MOVWF TEMP4 ;00001010
	
	;TEMP3?TEMP4????TRISA
	MOVF TEMP3,W
	IORWF TEMP4,W
	MOVWF TRISA ;11011010
	
        END


